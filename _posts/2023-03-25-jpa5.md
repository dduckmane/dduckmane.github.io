---
layout: single
title:  "OSIV"
categories: Jpa
tag: [개념]

author_profile: false
sidebar:
    nav: "counts"
---

OSIV는 Open Session In View의 약자로 **영속성 컨텍스트를 뷰단까지 열어준다** 는 뜻이다.

스프링의 OSIV는 프레센테이션 계층에는 트랜잭션이 없기 때문에 엔티티를 수정할 수 없지만 영속성 컨텍스트가 살아있기 때문에 지연로딩이 가능합니다.

그런데 이 전략은 너무 오랜시간동안 데이터베이스 커넥션 리소스를 사용하기 때문에, 실시간 트래픽이 중요한 애플리케이션에서는 커넥션이 모자랄 수 있다. 이것은 결국 장애로 이어진다.

OSIV를 끄면 트랜잭션을 종료할 때 영속성 컨텍스트를 닫고, 데이터베이스 커넥션도 반환한다. 따라서 커넥션 리소스를 낭비하지 않는다.OSIV를 끄면 모든 지연로딩을 트랜잭션 안에서 처리해야 한다.

실무에서 **OSIV를 끈 상태**로 복잡성을 관리하는 좋은 방법이 있다. 바로 Command와 Query를 분리하는 것이다.
