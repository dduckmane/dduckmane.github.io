---
layout: single
title:  "Docker를 통해서 프로젝트 배포하기"
categories: MSA
tag: [code, 개념]

author_profile: false
sidebar:
    nav: "counts"
---

# 도커를 이용하여 프로젝트 배포

## 1. docker network 생성

- 도커를 통해서 컨테이너가 실행이 된다며 각각의 ip 주소를 할당 받는다.
- 마이크로 서비스는 서로 통신을 해야하므로 ip 주소를 알아야 한다.
- 이 때 네트워크를 사용한다면 ip 주소가 아닌 이름으로 통신이 가능하다.

```
docker network create --gateway 172.18.0.1 --subnet 172.18.0.0/16 resume-network
```

- 네트워크를 생성 시에 gateway 와 subnet 을 지정을 해준다.

## 2. Redis 

```
docker run -d --name redis --network resume-network -p 6379:6379 redis
```

- 이름을 redis 라고 지정을 한다. --> 컨테이너 이름 뿐만아니라 네트워크안에서도 이름이 부여가 된다.
- 이전에 만든 네트워크에 포함을 한다.
- 포트 포워딩을 한다.
- 마지막에는 사용하고 싶은 이미지를 기재한다. tag 명시가 없다면 최신 버전을 받아온다.

## 3. rabbitmq

- spring cloud bus 를 통한 설정 최신화 작업을 할 때 rabbitmq 서비스를 사용한다.

```
docker run -d --name rabbitmq --network resume-network \
 -p 15672:15672 -p 5672:5672 -p 15671:15671 -p 5671:5671 -p 4369:4369 \
 -e RABBITMQ_DEFAULT_USER=guest \
 -e RABBITMQ_DEFAULT_PASS=guest rabbitmq:management
```

- rabbitmq 는 포트 포
